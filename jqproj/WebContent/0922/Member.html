<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/style.css">
<script src="../js/jquery-3.7.1.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css"
	rel="stylesheet">
<script
	src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"></script>
<!-- <style type="text/css">
table {
	border: 1px solid #ccc;
	text-align: center;
	color: #222;
}
th {
	background: #ccc;
	color: #fff;
}
th,td {
	border: 1px solid #ccc;
	padding: 3px;
}
</style> -->
<script type="text/javascript">
	var xhr = new XMLHttpRequest();
	//Promise //fetch
	$(function() {
		$('#member').on(
				'click',
				function() {
					// 요청
					xhr.open("get", "member.jsp", true);
					xhr.send();

					// 응답
					xhr.onreadystatechange = function() {
						if (this.readyState == 4 && this.status == 200) {
							// jsp에서 데이터만 받아 이 곳에 결과를 출력
							res = JSON.parse(this.responseText);
							// this.responseText = JSONObj

							// 출력내용
							code = "<table border ='1' class='table table-hover'>";
							code += "<tr><th>아이디</th>";
							code += "<th>이름</th><th>주소</th>";
							code += "<th>전화번호</th><th>이메일</th></tr>";

							$.each(res, function(i, v) {

								code += "<tr><td>" + res[i].id + "</td>";
								code += "<td>" + v.name + "</td><td>" + v.addr
										+ "</td>";
								code += "<td>" + v.hp + "</td><td>" + v.mail
										+ "</td></tr>";

							})
							code += "</table>";

							// 출력
							$('#result1').html(code);
						}
					}
				})
	})
</script>
</head>
<body>
	<h2></h2>
	<input type="button" value="click" id="member" />
	<br />
	<br />
	<div id="result1"></div>
	<hr color="red" />
</body>
</html>