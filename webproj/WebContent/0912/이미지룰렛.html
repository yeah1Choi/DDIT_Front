<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>이미지 룰렛 예제</title>
<link rel="stylesheet" href="../css/style.css">
<style type="text/css">
img {
	width: 100px;
	height: 100px;
	margin: 3px;
	box-sizing: border-box;
}
</style>

<script type="text/javascript">
vimgs = null; // 테두리 없애는 식이 처음에 실행될 때 vimg 변수를 찾을 수 없다는 오류를 막음
i = 0;

 // 시작버튼클릭
proc1 = (start) => { // start : 지역변수 매개변수 파라미터변수
	// 이미지 선택시 만들어진 테두리를 없애기
	if(vimgs != null) { // 시작 버튼 첫 클릭시 수행 안됨
		vimgs[rand].style.border = "none";
		i++;
		
		if(i>=3) {
			alert("3번의 기회를 모두 사용했습니다.")
			return;
		}
	}
	
	// 시작 버튼 없애기
	start.style.display = "none";
	
	// result1 검색 - img의 부모
	vres1 = document.querySelector('#result1');
	
	vid =setInterval(function(){
		// 첫번째 이미지를 선택
	 	vimg = document.querySelector('img');
		// 부모 내에서 뒷 순서로 이동
	 	vres1.appendChild(vimg);
	},500);
	
	// this 지역변수 전역변수로 바꾸기
	gstart = start;
}

proc2 =(stop)=> {
	clearInterval(vid);
	
	gstart.style.display = "inline";

	vimgs = document.querySelectorAll('#result1 img');
	// 랜덤발생
	rand = Math.floor(Math.random() * vimgs.length);
	
	vimgs[rand].style.border = "5px double red";
}
</script>
</head>
<body>
    <h3>이미지 룰렛</h3>
    <input type="button" value="시작" onclick="proc1(this)" />
    <input type="button" value="종료" onclick="proc2(this)" />
    <br />
    <div id="result1">
      <img src="../images/Penguins.jpg" alt="Penguins" />
      <img src="../images/등대.jpg" alt="등대" />
      <img src="../images/국화.jpg" alt="국화" />
      <img src="../images/대나무숲.jpg" alt="대나무숲" />
      <img src="../images/딸기스무디.jpg" alt="딸기스무디" />
      <img src="../images/단풍.jpg" alt="단풍" />
    </div>
    <hr color="red" />
</body>
</html>