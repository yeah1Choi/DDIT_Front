<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/style.css">
<script type="text/javascript">

	var proc1 = () => {
		//입력
		input = prompt("형식대로 주민번호를 입력 (예:123456-1234567)");
		
		//각 문자열 추출 : substr, slice, substring
		yy = input.substr(0,2); //년도
		mm = input.substr(2,2); //월
		dd = input.substr(4,2); //일
		
		gen = input.substr(7,1); //성별
		
		//비교
		//성별
		if(gen == 1 || gen == 3) gender = "남성";
		if(gen == 2 || gen == 4) gender = "여성";
		
		//년도
		if(gen == 1 || gen == 2) year = "19";
		if(gen == 3 || gen == 4) year = "20";
		year += yy;
		
		//나이계산: 현재연도에서 입력연도를 뺀다
		//현재날짜
		today = new Date();
		todayYear = today.getFullYear();
		
		age = todayYear - year
		
		//출력
		str = `주민번호 : ${input} <br>`;
		str += `생일 : ${year}년 ${mm}월 ${dd}일 <br>`;
		str += `성별 : ${gender} <br>`;
		str += `나이 : ${age} <br>`;
		
		document.querySelector('#result1').innerHTML = str;
	}
	
	var proc2 = () => {
		//입력
		input = prompt("형식대로 주민번호를 입력 (예:123456-1234567)");
		
		// '-' 제거
		// sprit : 구분자로 구분된 문자열을 분리하여 배열로 반환
		// replace : 특정문자로 바꿈
		reinput = input.replace("-","");
		
		
		// 곱하고 합 구하기
		sum = 0;
		number = "234567892345";
		
// 		for(i = 0; i < reinput.length - 1; i++) {
//			sum += reinput.substr(i,1) * number.substr(i,1);
//		} 
		
		for(i=0;i<reinput.length-1;i++) {
			sum += reinput.substr(i,1) * (i % 8 + 2);
			
			console.log(reinput.substr(i,1),(i % 8 + 2));
		} 
		
		// 11을 나눈 나머지 구하기, 결과를 11에서 빼기
		
		res = 11 - sum % 11;
		
		// 결과값은 0 ~ 11, 10 => 0 , 11 => 1 , ...
		//if(res >= 10) res = res-10;
		res = res % 10;
		
		// 주민번호 마지막 번호와 결과값 같은s지 비교
		if(res == reinput.substr(12,1)) { as = "맞는 번호입니다." }
		else { as = "가짜번호 입니다." }
		
		// 출력
		str = `주민번호 : ${input.substr(0,8)}******<br>`;
		str += `${as}`;
		document.querySelector('#result2').innerHTML = str;
	}
</script>
</head>
<body>
	<h3>String 객체 예제</h3>
	<p>prompt로 주민등록번호를 입력 받아 생년월일과 성별, 나이를 출력하는 프로그램을 작성하시오.</p>
	<ul>
		<li>예)</li>
		<li>주민등록번호를 110326-4432618로 입력 받은 경우</li>
		<li>생일 : 2011년 3월 26일</li>
		<li>성별 : 여자</li>
		<li>나이 : 12</li>
	</ul>
	<input type="button" value="click" onclick="proc1()">
	<br>
	<div id="result1"></div>
	<hr color="red">

	<h3>String 객체 예제</h3>
	<p>주민등록번호를 입력 받아 주민등록번호의 유효성을 검사하는 프로그램을 작성하시오.(ABCDEF-GHIJKLM)</p>
	<ol>
		<li>A*2 + B*3 + ... + H*9 + I*2 + ... + L*5 의 총합을 구한다.</li>
		<li>1번의 합을 11로 나눈 나머지를 구한다.</li>
		<li>11에서 2번의 결과를 뺀다.</li>
		<li>3번의 결과가 0~9이면 값 그대로, 10이면 0, 11이면 1로 변환</li>
		<li>4번의 결과와 M자리의 값이 같으면 맞는 번호이다.</li>
	</ol>
	<input type="button" value="click" onclick="proc2()">
	<br>
	<div id="result2"></div>
	<hr color="red">
</body>
</html>