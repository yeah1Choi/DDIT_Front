<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/style.css">
<script type="text/javascript">
var proc1 = () => {
	setTimeout(function() {
		// id = result1 을 검색 - 배경색 바꾸기
		res1 = document.getElementById('result1');
		
		res1.style.background = "yellow"; 
	},1000);
}

var proc2 =(start)=> {
	// 클릭 후 보이지 않도록 설정
	start.style.display = "none";
	
	// 지역변수인 start을 전역변수로 변경
	gst = start;
	
	// 종료버튼을 다시 보이도록 설정
	vstop.style.display = "inline-block";
	
	sid = setInterval(function() { // clear를 위해 변수에 저장
		// id = result2 을 검색 - 배경색 바꾸기
		console.log(sid);
		
		rr = Math.floor(Math.random()*256);
		rg = Math.floor(Math.random()*256);
		rb = Math.floor(Math.random()*256);
		
		res2 = document.getElementById('result2');
		
		res2.style.background = `#${rr.toString(16)}${rg.toString(16)}${rb.toString(16)}`;
//		res2.style.background = `rgb(${rr},${rg},${rb})`;
	},1000);
}

window.onload = function() {
	// 종료버튼을 안보이게 설정
	vstop = document.getElementById('stop'); // vstop 전역변수
 
	vstop.style.display = "none";
}

// 종료버튼 클릭
// 람다함수 : 파라미터가 하나 있을때 소괄호 안써도됨, 없거나 여러개면 있어야함
var stop = bt => { 
	// bt :  종료버튼 파라미터(객체변수) // 종료버튼 사라지게 설정
	bt.style.display = "none";
	
	// 확인버튼 나오도록 설정
	gst.style.display = "inline";
	
	// 실행종료
	clearInterval(sid);
}

</script>
</head>
<body>
	<h3>setTimeout(function, millisec)</h3>
	<p>millisec 지정된 시간이 경과하면 함수를 수행하고 끝낸다 - 일회용</p>
	<input type="button" value="click" onclick="proc1()">
	<br>
	<div id="result1"></div>
	<hr color="red">

	<h3>setInterval(function, millisec)</h3>
	<p>millisec 지정된 시간이 경과할 때마다 함수를 수행한다</p>
	<p>종료하기 위해서 clearInterval(id이름) 호출</p>
	<input type="button" value="start" onclick="proc2(this)">
	<input id="stop" type="button" value="stop" onclick="stop(this)">
	<br>
	<div id="result2"></div>
	<hr color="red">
</body>
</html>